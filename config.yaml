# JARVIS Configuration
# ====================
# Hybrid LLM: DictaLM for conversation/planning/reflection, Qwen3 for tools/self-evolution

# Hybrid LLM (per-node binding in LangGraph)
llm:
  # Conversation / Planning / Reflection / Personality - Hebrew SOTA, strong English
  conversation_model: "aminadaven/dictalm2.0-instruct:q5_K_M"
  # Tool-calling / Self-evolution / Structured output - fast, excellent at JSON
  tool_model: "qwen3:4b"
  host: "http://localhost:11434"
  temperature: 0.7
  max_tokens: 2048
  context_window: 20

# Voice
voice:
  preferred_language: "he"  # Hebrew is JARVIS default. "en" for English.
  stt_model: "large-v3-turbo"
  stt_device: "cuda"  # "cuda" for GPU (needs CUDA 12). Auto-falls back to CPU if cublas error.
  stt_language: "he"  # Force Hebrew - avoids Arabic misdetection. Use null for auto-detect.
  tts_engine: "piper"
  tts_voice: "jgkawell/jarvis"
  tts_quality: "medium"
  hebrew_voice: "he-IL-AvriNeural"  # fallback when Hebrew detected
  force_hebrew_tts: false  # true = always use edge-tts (Hebrew voice for all)
  preload_tts: false  # true = warm up TTS at startup (reduces first-response latency)
  tts_speed: 1.15  # Piper: length_scale inverse (0.85 = faster). Edge: rate "+15%"
  max_response_words: 50  # Keep responses brief for voice
  min_rms: 0.0010  # Don't respond if recording is quieter. 0.002 was too strict for some mics.
  recorder_sample_rate: 16000
  recorder_silence_duration: 2.5   # Seconds of silence before considering speech done (longer = more patient for pauses/thinking)
  recorder_silence_threshold: 0.012 # RMS below this = silence (slightly higher helps with non-native speaker pauses)
  push_to_talk_seconds: 5   # Fixed recording length for push-to-talk
  follow_up_seconds: 8     # After response, record this long for follow-up (no "Hey Jarvis" needed)

# Wake words (openwakeword - 100% local)
# "Hey Jarvis" (English) + "היי ג'ארוויס" (Hebrew - requires custom training)
wake_word:
  models: ["hey_jarvis_v0.1"]
  threshold: 0.15  # Lower = more sensitive. 0.15-0.35 typical. 0.0021 too low (model scores 0-1)
  device: null     # Set to mic ID from: python -c "import sounddevice; print(sounddevice.query_devices())"
  cooldown_seconds: 3  # Ignore rapid re-triggers after wake

# Memory
memory:
  db_path: "data/jarvis.db"
  chroma_path: "data/chroma"
  embedding_model: "nomic-embed-text"
  max_memories: 5

# Tools
tools:
  allowed_directories:
    - "~"
  max_search_results: 5
  command_timeout: 30

# Heartbeat
heartbeat:
  interval_minutes: 30

# General
debug: false
log_level: "INFO"
